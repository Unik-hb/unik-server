// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  ADMIN
  BROKER
  ADVERTISER
  AGENT
}

enum Category {
  SALE
  RENT
}

enum ListingStatus {
  PENDING
  APPROVED
  REJECTED
  REVISION
}

enum CommissionType {
  REAL_ESTATE
  BROKER_SALE
  BROKER_CAPTURE
  CONTRACT_FEE
}

enum PersonType {
  INDIVIDUAL
  COMPANY
}

enum TypeOfProperty {
  HOUSE // CASA
  APARTMENT // APARTAMENTO
  STUDIO // STUDIO
  LOFT // LOFT
  LOT // TERRENO
  LAND // LOTE
  FARM // FAZENDA OU GRANJA
  SHOPS // LOJA
  GARAGE // GARAGEM
  SHED // GALPÃO
  BUILDING // PRÉDIO
  NO_RESIDENCIAL // NÃO RESIDENCIAL
}

enum StatusPost {
  ACTIVE
  INACTIVE
}

model User {
  id          String     @id @default(uuid())
  name        String
  description String?
  company     String?
  email       String     @unique
  password    String
  phone       String?
  cpf         String?
  cnpj        String?
  rg          String?
  personType  PersonType @default(INDIVIDUAL)
  role        Role       @default(ADVERTISER)
  photo       String?
  creci       String?
  photoCreci  String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  properties  Property[]

  @@map("users")
}

model Property {
  id              String          @id @default(uuid())
  code            String?         @unique // Código único do imóvel
  title           String
  description     String?
  category        Category
  typeOfProperty  TypeOfProperty?
  iptu            Float?
  price           Float
  condoFee        Float
  photos          Json?
  builtArea       String
  bedrooms        Int
  suites          Int
  bathrooms       Int?
  parkingSpots    Int
  updatedRegistry String?
  address         String
  addressNumber   String?
  uf              String?
  neighborhood    String
  city            String
  zipCode         String
  stairFlights    Int? // lances de escadas
  motiveRevision  String? // motivo da revisão
  elevator        Boolean
  airConditioning Boolean
  pool            Boolean
  sevantsRoom     Boolean
  terrace         Boolean
  closet          Boolean
  residential     Boolean
  gourmetArea     Boolean
  gym             Boolean
  coworking       Boolean
  playroom        Boolean // Brinquedoteca
  petArea         Boolean
  partyRoom       Boolean // Salão de festas
  status          ListingStatus   @default(PENDING)
  statusPost      StatusPost? @default(ACTIVE)

  User    User?   @relation(fields: [usersId], references: [id])
  usersId String?
  owner   Owner?  @relation(fields: [ownerId], references: [id])
  ownerId String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("properties")
}

model Owner {
  id                    String  @id @default(uuid())
  name                  String?
  rg                    String?
  cpf                   String?
  email                 String?
  phone                 String?
  authorizationDocument String?

  Property Property[]

  createdAt DateTime @default(now())

  @@map("owners")
}
